import "dart:async" as GB;import "dart:html" as MB;import "dart:math" as cC;class FE extends UB{var F;var AG=1.0;var sF=0.2;var tF=0.05;var iF=1.0;var YC=10;var bB=64;var ZG=64;var UG=false;FE(){F=new List<dC>();var i=new cC.Random(345678);for(int g=0;g<bB;g++ ){var j=new dC(i.nextInt(500),i.nextInt(400),YC);F.add(j);qC(j);}for(int g=0;g<bB;g++ ){var h=(g+1);if(h==bB){h=0;}F[g].HB=F[h];}this.BE.listen(eG);}eG( h){for(int g=0;g<bB;g++ ){F[g].ZF(sF,tF);}for(int g=0;g<bB;g++ ){F[g].aF(AG,iF);}}}class dC extends wB{var HB;var SB=0;var TB=0;var AD=0;var BD=0;var BC=0;var CC=0;var YC;var shape=new LG();dC(this.SB,this.TB,this.YC){shape.tC.gF(0,0,4);shape.tC.jF(LE.GF);shape.x=SB;shape.y=TB;this.qC(shape);this.BE.listen(fG);}fG( g){YF();} ZF( g, h){if(this.HB!=null){this.gG(g);this.hG(h);}} gG( j){var h=this.HB.SB-this.SB;var i=this.HB.TB-this.TB;var g=cC.sqrt(h*h+i*i);h/= g;i/= g;g=(g-this.YC)*j;this.BC+= h*g;this.CC+= i*g;} hG( g){if(this.HB.HB!=null){this.BC+= ((this.HB.SB-this.SB)-(this.HB.HB.SB-this.HB.SB))*g;this.CC+= ((this.HB.TB-this.TB)-(this.HB.HB.TB-this.HB.TB))*g;}} aF( g, h){this.BC-= this.AD*h;this.CC-= this.BD*h;this.AD+= this.BC*g;this.BD+= this.CC*g;this.SB+= this.AD*g;this.TB+= this.BD*g;this.BC=0;this.CC=0;} YF(){shape.x=SB;shape.y=TB;}}var eC; main(){var g=MB.query('#stage');eC=new eB('myStage',g);var h=new GD();h.cF(eC);var i=new FE();eC.qC(i);}class CG{static const  DG="Chrome";static const  EG="Firefox";final  dF;final  minimumVersion;const CG(this.dF,[this.minimumVersion]);}class FG{const FG();}class GG{final  name;const GG(this.name);}class HG{const HG();}class IG{const IG();}class BB{var iG;var lG;BB( g, h):iG=g,lG=h;BB.bG():this(0,0); clone()=>new BB(iG,lG); toString()=>"Point [x=${iG}, y=${lG}]"; get x=>iG; get y=>lG; get length=>cC.sqrt(iG*iG+lG*lG);set x( g){iG=g;}set y( g){lG=g;} add( g){return new BB(iG+g.x,lG+g.y);} subtract( g){return new BB(iG-g.x,lG-g.y);}TC( g){iG=g.x;lG=g.y;} tD( g){return iG==g.x&&lG==g.y;}}class CD extends AB{}class u{static const  RE="added";static const  ZE="addedToStage";static const  lC="enterFrame";static const  YD="exitFrame";static const  kE="removed";static const  oE="removedFromStage";static const  sE="resize";static const  gD="render";var fI;var gI;var hI;var BH;var jI;var kI;var oI;u( g,[ h=false]){eI(g,h);} eI( g,[ h=false]){fI=g;gI=h;hI=dB.JC;BH=null;jI=null;kI=false;oI=false;} get DC=>kI; get type=>fI; get bubbles=>gI; get RC=>true; get target=>BH;}class ME<xB>{final  pG=new List<xB>();final  AH;var FH=0;ME( g()):AH=g; bB(){if(FH==0){return AH();}else{FH-- ;return pG[FH];}}CE( g){if(FH==pG.length){pG.add(g);}else{pG[FH]=g;}FH++ ;}reset(){pG.clear();FH=0;}}abstract class UB extends AB{final  DH=new List<o>();var IH=true;var NH=true; qC( g){if(g.parent==this){var h=DH.indexOf(g);DH.removeAt(h);DH.add(g);}else{bF(g,DH.length);}} bF( g, h){if(h<0||h>DH.length)throw new ArgumentError("Error #2006: The supplied index is out of bounds.");if(g==this)throw new ArgumentError("Error #2024: An object cannot be added as a child of itself.");if(g.parent==this){DH.removeAt(DH.indexOf(g));if(h>DH.length)h-- ;DH.insert(h,g);}else{g.wF();g.uI(this);DH.insert(h,g);g.dispatchEvent(new u(u.RE,true));if(this.hB!=null)BJ(g,new u(u.ZE));}} uF( h){var g=DH.indexOf(h);if(g==-1)throw new ArgumentError("Error #2025: The supplied DisplayObject must be a child of the caller.");vF(g);} vF( g){if(g<0||g>=DH.length)throw new ArgumentError("Error #2006: The supplied index is out of bounds.");var h=DH[g];h.dispatchEvent(new u(u.kE,true));if(this.hB!=null)BJ(h,new u(u.oE));h.uI(null);DH.removeAt(g);} contains( g){for(;g!=null;g=g.NI)if(g==this)return true;return false;} RB( n,[ g]){if(g==null)g=new CB.bG();if(DH.length==0)return super.RB(n,g);var i=double.INFINITY;var j=double.INFINITY;var k=double.NEGATIVE_INFINITY;var l=double.NEGATIVE_INFINITY;var v=DH.length;for(int m=0;m<DH.length;m++ ){var q=DH[m];QI.sD(q.rI,n);var h=q.RB(QI,g);if(h.left<i)i=h.left;if(h.top<j)j=h.top;if(h.right>k)k=h.right;if(h.bottom>l)l=h.bottom;}g.x=i;g.y=j;g.width=k-i;g.height=l-j;return g;} KB( i, j){i=i.toDouble();j=j.toDouble();var m=null;for(int k=DH.length-1;k>=0;k-- ){var l=DH[k];if(l.aJ){var g=l.rI;var n=i-g.OB;var q=j-g.PB;var v=(g.d*n-g.c*q)/g.pB;var FB=(g.a*q-g.b*n)/g.pB;var h=l.KB(v,FB);if(h!=null){if(h is AB)if(h.oF)return IH?h:this;m=this;}}}return m;} EB( i){for(int g=0;g<DH.length;g++ ){var h=DH[g];if(h.aJ)i.yF(h);}}bJ( g, i){i.add(g);if(g is UB){var k=g as UB;var j=k.DH;for(int h=0;h<j.length;h++ ){bJ(j[h],i);}}}BJ( i, j){var g=LC.bB() as List<o>;bJ(i,g);for(int h=0;h<g.length;h++ ){g[h].dispatchEvent(j);}g.clear();LC.CE(g);}}class wB extends UB{var TG=false;var EE=false;var uC=null;var tG=null;var RH=null; get tC{return (tG!=null)?tG:tG=new IC();}iI(){var i=this.WC;var j=this.hB;var l=this.visible;if(i!=null&&this.hB!=null){var g=cB.gE;if(g!=null){var h=rI.bC(i);if(h.x<g.left)h.x=g.left;if(h.x>g.right)h.x=g.right;if(h.y<g.top)h.y=g.top;if(h.y>g.bottom)h.y=g.bottom;i=rI.rD().bC(h);}var m=new BB(MH,UH).add(i).subtract(cB.eE);var k=rI.bC(m);this.visible=false;RH=j.KB(j.pF,j.qF);this.x=k.x;this.y=k.y;this.visible=l;}} RB( h,[ g]){if(g==null)g=new CB.bG();super.RB(h,g);if(tG!=null){g=tG.AI(h).union(g);}return g;} KB( i, j){var h=null;if(this.uC!=null){var g=this.yC(this.uC);if(g!=null){var k=i*g.a+j*g.c+g.OB;var l=i*g.b+j*g.d+g.PB;if(this.uC.KB(k,l)!=null){h=this;}}}else{h=super.KB(i,j);if(h==null&&tG!=null){if(tG.UI(i,j)){h=this;}}}return h;}EB( g){if(tG!=null)tG.EB(g);super.EB(g);}}class NB<xB extends u>{final  yG;const NB(this.yG); forTarget( g,{ useCapture: false}){return g.YH(yG,useCapture);}}class nB<xB extends u> extends GB.Stream<xB>{final  BH;final  yG;final  HH;var QH=[] ;nB(this.BH,this.yG,this.HH); get isBroadcast=>true; asBroadcastStream({ onListen( subscription), onCancel( subscription)})=>this; get FI=>QH.length>0; listen( i( event),{ onError(error), onDone(), cancelOnError: false}){var h=new KD<xB>(this,i);QH.add(h);if(HH==false){var g=this;switch (yG){case u.lC:kD.rC(g);break;case u.YD:mD.rC(g);break;case u.gD:oD.rC(g);break;}}return h;}fF( i){if(i.LH)return;var j=[] ;for(var g=0;g<QH.length;g++ ){var h=QH[g];if(identical(h,i)){h.LH=true;}else{j.add(h);}}QH=j;}dispatchEvent( i){var j=QH;var k=QH.length;for(var g=0;g<k;g++ ){var h=j[g];if(h.LH==false){h.dH(i);}}}}class IB{static const  gC="auto";static const  hC="arrow";static const  jC="button";static const  fE="hand";static const  WD="ibeam";static const  hE="wait";}class cB{static var HD=IB.gC;static var TE=false;static var PD=null;static var eE=null;static var gE=null;static var mE=new GB.StreamController<String>();static var rE=mE.stream.asBroadcastStream();static  pD( i){var h=i;var g="auto";if(HD!=IB.gC){h=HD;}switch (h){case IB.gC:g="auto";break;case IB.hC:g="default";break;case IB.jC:g="pointer";break;case IB.fE:g="move";break;case IB.WD:g="text";break;case IB.hE:g="wait";break;}if(TE){g="none";}return g;}}class HC extends u{HC( g):super(g,false); get RC=>false;}class LG extends o{var tG=new IC(); get tC=>tG; RB( g,[ h]){if(tG==null){return super.RB(g,h);}else{return tG.AI(g);}} KB( g, h){if(tG==null){return null;}else{return tG.UI(g,h)?this:null;}} EB( g){if(tG!=null)tG.EB(g);}}class IC{final  DI=new List<kB>();var HI=new CB.bG();var MI=true;clear(){DI.clear();MI=true;}SI( g){DI.add(g);MI=true;}beginPath()=>SI(new NG());moveTo( g, h)=>SI(new OG(g,h));arc( g, h, i, j, k, l)=>SI(new PG(g,h,i,j,k,l));jF( g)=>SI(new QG(lE(g)));gF( g, h, i){SI(new OG(g+i,h));SI(new PG(g,h,i,0,cC.PI*2,false));} AI( i){var h=new yB(i);for(int g=0;g<DI.length;g++ ){DI[g].EC(h);}return h.kF();} UI( h, i){if(MI){MI=false;HI=AI(new t.cG());}if(HI.contains(h,i)){var j=pC;j.beginPath();for(int g=0;g<DI.length;g++ ){if(DI[g].KB(j,h,i)){return true;}}}return false;} EB( i){var g=i.context;g.save();g.beginPath();for(int h=0;h<DI.length;h++ ){DI[h].EB(g);}g.restore();}}class CB{var iG;var lG;var rG;var wG;CB( g, h, i, j):iG=g,lG=h,rG=i,wG=j;CB.bG():this(0,0,0,0); clone()=>new CB(iG,lG,rG,wG); toString()=>"Rectangle [x=${iG}, y=${lG}, width=${rG}, height=${wG}]"; get x=>iG; get y=>lG; get width=>rG; get height=>wG; get left=>iG; get top=>lG; get right=>iG+rG; get bottom=>lG+wG;set x( g){iG=g;}set y( g){lG=g;}set width( g){rG=g;}set height( g){wG=g;} contains( g, h){return iG<=g&&lG<=h&&iG+rG>=g&&lG+wG>=h;} tD( g){return iG==g.x&&lG==g.y&&rG==g.width&&wG==g.height;} get isEmpty{return rG==0&&wG==0;}TC( g){iG=g.x;lG=g.y;rG=g.width;wG=g.height;} union( g){var h=cC.min(this.left,g.left);var i=cC.min(this.top,g.top);var j=cC.max(this.right,g.right);var k=cC.max(this.bottom,g.bottom);return new CB(h,i,j-h,k-i);}}class ED extends AB{}class GE{static const  UE="input";}abstract class kB{EB( g); KB( g, h, i){EB(g);return false;}EC( g){}}class DD{static const  mC="none";static const  bE="touchPoint";}class jB{static const  PE=0;static const  SE=1;static const  fD=2;static const  cE=3;static const  TD=4;}abstract class AB extends o{var hF=false;var oF=true;var aG=true;var tabIndex=0;static const  iE=const NB<s>(s.bD);static const  wE=const NB<s>(s.ZD);static const  AF=const NB<s>(s.QD);static const  FF=const NB<s>(s.VD);static const  MF=const NB<s>(s.eD); get onMouseOut=>AB.iE.forTarget(this); get onMouseMove=>AB.wE.forTarget(this); get onMouseDown=>AB.AF.forTarget(this); get onMouseUp=>AB.FF.forTarget(this); get onMouseWheel=>AB.MF.forTarget(this);static const  NF=const NB<DB>(DB.XD);static const  OF=const NB<DB>(DB.OD);static const  PF=const NB<DB>(DB.RD); get onTouchMove=>AB.NF.forTarget(this); get onTouchEnd=>AB.OF.forTarget(this); get onTouchCancel=>AB.PF.forTarget(this);static const  RF=const NB<VB>(VB.ND);static const  TF=const NB<VB>(VB.MD); get onKeyUp=>AB.RF.forTarget(this); get onKeyDown=>AB.TF.forTarget(this);}abstract class lB{ MC( g);}abstract class HE{}class GD{var kG;var vG;var zG;var CH;var SH;var ZH;var eH;var jH;GD(){kG=new KC();vG=new List<eB>();zG=-1;SH=false;ZH=new oB(0);eH=new cD();jH=new hD();CH=JI;KI();} get wD=>kG;KI(){MB.window.requestAnimationFrame(CH);}JI( g){KI();g=g.toDouble();if(zG==-1)zG=g;if(zG>g)zG=g;var j=g-zG;var i=j/1000.0;var k=g/1000.0;var l=false;if(j>=1){zG=g;ZH.OH=i;kD.dispatchEvent(ZH);kG.MC(i);for(int h=0;h<vG.length;h++ ){vG[h].wD.MC(i);}if(SH){SH=false;oD.dispatchEvent(jH);}for(int h=0;h<vG.length;h++ ){vG[h].nF(k,i);}mD.dispatchEvent(eH);}} cF( g){if(g.vC!=null){g.vC.xF(g);}vG.add(g);g.GJ=this;} xF( g){if(g.vC==this){vG.remove(g);g.GJ=null;}}}abstract class JE{}class IE{}abstract class o extends WB implements FD{static var XE=0;var GH=XE++ ;var iG=0.0;var lG=0.0;var MH=0.0;var UH=0.0;var WH=1.0;var cH=1.0;var fH=0.0;var hH=0.0;var kH=0.0;var mH=1.0;var nH=true;var pH=false;var sH=null;var vH=null;var yH=null;var BI=false;var EI=null;var GI=null;var II=null;var LI="";var NI=null;final  QI=new t.cG();final  TI=new t.cG();var YI=true;static const  LF=const NB<oB>(u.lC); get BE=>o.LF.forTarget(this); get x=>iG; get y=>lG; get visible=>nH; get alpha=>mH; get eF=>vH!=null; get SC=>II; get name=>LI; get parent=>NI; get WC{var g=this.hB;return (g!=null)?this.aB(g.NJ):null;} get pF{var g=this.WC;return (g!=null)?g.x:0.0;} get qF{var g=this.WC;return (g!=null)?g.y:0.0;} get root{var g=this;while (g.NI!=null)g=g.NI;return g;} get hB{var g=this.root;return (g is eB)?g:null;}set x( g){if(g is num)iG=g;YI=true;}set y( g){if(g is num)lG=g;YI=true;}set wC( g){if(g is num)WH=g;YI=true;}set xC( g){if(g is num)cH=g;YI=true;}set visible( g){if(g is bool)nH=g;}set alpha( g){if(g is num)mH=g;}set SC( g){II=g;} setTransform( g, h,[ i, j, k, l, m, n, q]){if(g is num)iG=g;if(h is num)lG=h;if(i is num)WH=i;if(j is num)cH=j;if(k is num)kH=k;if(l is num)fH=l;if(m is num)hH=m;if(n is num)MH=n;if(q is num)UH=q;YI=true;} get width=>RB(rI).width; get height=>RB(rI).height; set width( h){this.wC=1;var g=this.width;this.wC=(g!=0.0)?h/g:1.0;} set height( h){this.xC=1;var g=this.height;this.xC=(g!=0.0)?h/g:1.0;} wF(){if(NI!=null)NI.uF(this);} get aJ=>nH&&!pH; get rI{if(YI){YI=false;var g=fH+kH;var h=hH+kH;if(g==0.0&&h==0.0){TI.ZC(WH,0.0,0.0,cH,iG-MH*WH,lG-UH*cH);}else{var i,j,k,l;var m=cC.cos(g);var n=cC.sin(g);if(g==h){i=WH*m;j=WH*n;k=-cH*n;l=cH*m;}else{i=WH*cC.cos(h);j=WH*cC.sin(h);k=-cH*n;l=cH*m;}var q=iG-(MH*i+UH*k);var v=lG-(MH*j+UH*l);TI.ZC(i,j,k,l,q,v);}}return TI;} yC( h){if(h==NI)return rI.clone();if(h.NI==this)return h.rI.rD();var j=new t.cG();var g=this;while (g!=h&&g.NI!=null){j.fB(g.rI);g=g.NI;}if(h==null&&g!=null){j.fB(g.rI);g=null;}if(g==h)return j;var k=new t.cG();var i=h;while (i!=this&&i.NI!=null){k.fB(i.rI);i=i.NI;}k.vD();if(i==this)return k;if(i!=g)return null;j.fB(k);return j;} RB( h,[ g]){if(g==null)g=new CB.bG();g.x=h.OB;g.y=h.PB;g.width=0;g.height=0;return g;} KB( g, h){if(RB(oC).contains(g,h))return this;return null;} aB( h){QI.identity();for(o g=this;g!=null;g=g.NI)QI.fB(g.rI);QI.vD();return QI.bC(h);} UJ( g){g.context.translate(yH.x,yH.y);vH.EB(g);} dispatchEvent( h){var g=null;if(h.RC||h.bubbles){for(o j=NI;j!=null;j=j.NI){if(j.mI(h.type,h.RC,h.bubbles)){if(g==null)g=LC.bB() as List<o>;g.add(j);}}}if(h.RC&&g!=null){for(int i=g.length-1;i>=0&&h.DC==false;i-- ){g[i].OI(h,this,g[i],dB.ID);}}if(h.DC==false){OI(h,this,this,dB.JC);}if(h.bubbles&&g!=null){for(int i=0;i<g.length&&h.DC==false;i++ ){g[i].OI(h,this,g[i],dB.aE);}}if(g!=null){g.clear();LC.CE(g);}} uI( h){for(var g=h;g!=null;g=g.NI)if(g==this)throw new ArgumentError("Error #2150: An object cannot be added as a child to one of it's children (or children's children, etc.).");NI=h;} EB( g);}class WB{var uG;var EH;dispatchEvent( g){OI(g,this,this,dB.JC);} mI( h, i, j){if(i&&EH!=null){var g=EH[h];if(g!=null&&g.FI)return true;}if(j&&uG!=null){var g=uG[h];if(g!=null&&g.FI)return true;}return false;} YH( h, g){if(g){if(EH==null)EH=new Map<String,nB>();}else{if(uG==null)uG=new Map<String,nB>();}var i=g?EH:uG;return i.putIfAbsent(h,(){return new nB(this,h,g);});}OI( g, k, l, h){var i=(h==dB.ID)?EH:uG;if(i==null)return;var j=i[g.type];if(j==null)return;g.BH=k;g.jI=l;g.hI=h;g.kI=false;g.oI=false;j.dispatchEvent(g);}}class dB{static const  ID=1;static const  JC=2;static const  aE=3;}class LB{final  iG;final  lG;LB( g, h):iG=g.toDouble(),lG=h.toDouble(); clone()=>new LB(iG,lG); get x=>iG; get y=>lG; toString()=>"Vector [x=${iG}, y=${lG}]"; operator+( g)=>new LB(iG+g.iG,lG+g.lG); operator-( g)=>new LB(iG-g.iG,lG-g.lG); operator*( g)=>new LB(iG*g.iG,lG*g.lG); operator/( g)=>new LB(iG/g.iG,lG/g.lG); operator-()=>new LB(-iG,-lG); operator==( g)=>iG==g.iG&&lG==g.lG; get hashCode=>iG.hashCode+lG.hashCode*7; get length=>cC.sqrt(iG*iG+lG*lG); rotate( g){var h=cC.sin(g);var i=cC.cos(g);return new LB(iG*i-lG*h,iG*h+lG*i);}}class fC{var YB;var gB;}class t{var jG,mG,nG,oG,qG,sG;var xG;t( g, h, i, j, k, l):jG=g.toDouble(),mG=h.toDouble(),nG=i.toDouble(),oG=j.toDouble(),qG=k.toDouble(),sG=l.toDouble(),xG=(g*j-h*i).toDouble();t.cG():jG=1.0,mG=0.0,nG=0.0,oG=1.0,qG=0.0,sG=0.0,xG=1.0; clone(){return new t(jG,mG,nG,oG,qG,sG);} rD(){var g=(oG/xG);var h=-(mG/xG);var i=-(nG/xG);var j=(jG/xG);var k=-(g*qG+i*sG);var l=-(h*qG+j*sG);return new t(g,h,i,j,k,l);} get a=>jG; get b=>mG; get c=>nG; get d=>oG; get OB=>qG; get PB=>sG; get pB=>xG; bC( g){var h=g.x.toDouble();var i=g.y.toDouble();return new BB(h*jG+i*nG+qG,h*mG+i*oG+sG);} xI( g){var h=g.x.toDouble();var i=g.y.toDouble();return new BB(h*jG+i*nG+qG,h*mG+i*oG+sG);} fB( g){var l=jG;var m=mG;var n=nG;var q=oG;var v=qG;var FB=sG;var QB=xG;var h=g.a;var i=g.b;var j=g.c;var k=g.d;var uB=g.OB;var FC=g.PB;var GC=g.pB;jG=(l*h+m*j).toDouble();mG=(l*i+m*k).toDouble();nG=(n*h+q*j).toDouble();oG=(n*i+q*k).toDouble();qG=(v*h+FB*j+uB).toDouble();sG=(v*i+FB*k+FC).toDouble();xG=(QB*GC).toDouble();} identity(){jG=1.0;mG=0.0;nG=0.0;oG=1.0;qG=0.0;sG=0.0;xG=1.0;} vD(){var j=jG;var k=mG;var l=nG;var m=oG;var h=qG;var i=sG;var g=xG;jG=(m/g).toDouble();mG=-(k/g).toDouble();nG=-(l/g).toDouble();oG=(j/g).toDouble();qG=-(jG*h+nG*i).toDouble();sG=-(mG*h+oG*i).toDouble();xG=(1.0/g).toDouble();} rotate( i){var g=cC.cos(i);var h=cC.sin(i);var j=jG;var k=mG;var l=nG;var m=oG;var n=qG;var q=sG;jG=(j*g-k*h).toDouble();mG=(j*h+k*g).toDouble();nG=(l*g-m*h).toDouble();oG=(l*h+m*g).toDouble();qG=(n*g-q*h).toDouble();sG=(n*h+q*g).toDouble();} scale( g, h){jG=(jG*g).toDouble();mG=(mG*h).toDouble();nG=(nG*g).toDouble();oG=(oG*h).toDouble();qG=(qG*g).toDouble();sG=(sG*h).toDouble();xG=(xG*g*h).toDouble();} translate( g, h){qG=(qG+g).toDouble();sG=(sG+h).toDouble();} ZC( g, h, i, j, k, l){jG=g.toDouble();mG=h.toDouble();nG=i.toDouble();oG=j.toDouble();qG=k.toDouble();sG=l.toDouble();xG=(jG*oG-mG*nG).toDouble();} TC( g){jG=g.a.toDouble();mG=g.b.toDouble();nG=g.c.toDouble();oG=g.d.toDouble();qG=g.OB.toDouble();sG=g.PB.toDouble();xG=g.pB.toDouble();} sD( g, h){var m=g.a;var n=g.b;var q=g.c;var v=g.d;var FB=g.OB;var QB=g.PB;var uB=g.pB;var i=h.a;var j=h.b;var k=h.c;var l=h.d;var FC=h.OB;var GC=h.PB;var BG=h.pB;jG=(m*i+n*k).toDouble();mG=(m*j+n*l).toDouble();nG=(q*i+v*k).toDouble();oG=(q*j+v*l).toDouble();qG=(FB*i+QB*k+FC).toDouble();sG=(FB*j+QB*l+GC).toDouble();xG=(uB*BG).toDouble();}}class JG{static const  MG="round";}class KG{static const  MG="round";}class vB{static const  QE="exactFit";static const  VE="noBorder";static const  dE="noScale";static const  UD="showAll";}class s extends u{static const  JD="click";static const  YE="doubleClick";static const  QD="mouseDown";static const  VD="mouseUp";static const  ZD="mouseMove";static const  bD="mouseOut";static const  qE="mouseOver";static const  eD="mouseWheel";static const  iD="middleClick";static const  vE="middleMouseDown";static const  zE="middleMouseUp";static const  jD="rightClick";static const  DF="rightMouseDown";static const  EF="rightMouseUp";var WI,XI;var ZI,aI;var lI,nI;var pI;var bH;var oH;var gH;var iH;var qI;s( g,[ h=false]):super(g,h){eI(g,h);} eI( g,[ h=false]){super.eI(g,h);WI=XI=0;ZI=aI=0;lI=nI=0;pI=false;bH=false;oH=false;gH=false;iH=false;qI=0;}set sI( g){WI=g.x;XI=g.y;}set tI( g){ZI=g.x;aI=g.y;} get deltaX=>lI; get deltaY=>nI; get ZB=>pI; get altKey=>bH; get ctrlKey=>gH; get shiftKey=>iH; get AC=>qI;}class DB extends u{static const  LD="touchBegin";static const  OD="touchEnd";static const  RD="touchCancel";static const  XD="touchMove";static const  jE="touchOver";static const  pE="touchOut";var RI;var VI;var WI,XI;var ZI,aI;var bH;var oH;var gH;var iH;var bI;var cI;var dI;DB( g,[ h=false]):super(g,h){eI(g,h);} eI( g,[ h=false]){super.eI(g,h);RI=0;VI=false;WI=XI=0;ZI=aI=0;bH=false;oH=false;gH=false;iH=false;bI=1.00;cI=0;dI=0;}set sI( g){WI=g.x;XI=g.y;}set tI( g){ZI=g.x;aI=g.y;} get aC=>RI; get altKey=>bH; get ctrlKey=>gH; get shiftKey=>iH;}class KE extends u{static const  WE="textInput";var aH="";KE( g,[ h=false]):super(g,h);}class VB extends u{static const  MD="keyDown";static const  ND="keyUp";var bH=false;var gH=false;var iH=false;var lH=false;var oH=false;var rH=0;var uH=0;var xH=0;VB( g,[ h=false]):super(g,h); get altKey=>bH; get ctrlKey=>gH; get shiftKey=>iH; get charCode=>rH; get keyCode=>uH; get keyLocation=>xH;}abstract class FD{ EB( g);}class mB{final  matrix=new t.cG();var alpha=1.0;var SC=iC.kC;var PH; get rF{if(PH==null)PH=new mB();return PH;}}class LE{static const  GF=0xFFDC143C;}class NE implements FD{}typedef  OE<xB extends u>( event);class KD<xB extends u> extends GB.StreamSubscription<xB>{var JH=0;var LH=false;var VH;var dH;KD(this.VH,this.dH); get isPaused=>JH>0; cancel(){VH.fF(this);} pause([ g]){JH++ ;if(g!=null){g.whenComplete(resume);}} resume(){if(JH==0){throw new StateError("Subscription is not paused.");}JH-- ;}}class KC implements lB{var KH;var TH;var XH=0.0;KC(){KH=new fC();TH=KH;} add( g){if(g is !lB){throw new ArgumentError("The supplied animatable does not extend type Animatable.");}if(this.contains(g)==false){var h=new fC();TH.YB=g;TH.gB=h;TH=h;}} remove( h){if(h!=null){var g=KH;while (identical(g,TH)==false){if(identical(g.YB,h)){g.YB=null;break;}g=g.gB;}}} contains( h){if(h!=null){var g=KH;while (identical(g,TH)==false){if(identical(g.YB,h))return true;g=g.gB;}}return false;} MC( j){XH+= j;var g=KH;var i=TH;while (identical(g,i)==false){var k=g.YB;if(k==null){var h=g.gB;g.YB=h.YB;g.gB=h.gB;if(identical(h,i))i=g;if(identical(h,TH))TH=g;}else if(k.MC(j)==false){g.YB=null;}else{g=g.gB;}}return true;}}class iC{static const  kC="source-over";}class oB extends HC{var OH;oB( g):super(u.lC),OH=g;}class SD{static var uE=DD.mC;static var yE=new GB.StreamController<String>();static var BF=yE.stream.asBroadcastStream();static  get HF=>uE;}class JB{static const  aD="B";static const  nE="BL";static const  dD="BR";static const  SE="L";static const  fD="R";static const  tE="T";static const  xE="TR";static const  mC="";} lE( g){var h=(g>>24)&0xFF;var i=(g>>16)&0xFF;var j=(g>>8)&0xFF;var k=(g>>0)&0xFF;return "rgba(${i},${j},${k},${h/255.0})";}class cD extends HC{cD():super(u.YD);}class XB{final  qH;var tH=0.0;var wH=0.0;var zH;var CI;XB.dG( i,[ h]):qH=i{zH=new mB();CI=zH;var g=zH.matrix;if(h is t){g.TC(h);}qH.setTransform(g.a,g.b,g.c,g.d,g.OB,g.PB);qH.globalAlpha=1.0;qH.globalCompositeOperation=iC.kC;} get context=>qH; reset([ h, i, j]){tH=(i is num)?i:0.0;wH=(j is num)?j:0.0;CI=zH;var g=zH.matrix;if(h is t){g.TC(h);}qH.setTransform(1.0,0.0,0.0,1.0,0.0,0.0);qH.clearRect(0,0,qH.canvas.width,qH.canvas.height);qH.setTransform(g.a,g.b,g.c,g.d,g.OB,g.PB);qH.globalAlpha=1.0;qH.globalCompositeOperation=iC.kC;} yF( h){var g=h.rI;var QB=h.mH;var j=h.sH;var k=h.GI;var n=h.II;var l=CI as mB;var i=CI.rF as mB;CI=i;var q=i.matrix;var v=l.alpha.toDouble()*QB;var FB=(n!=null)?n:l.SC;q.sD(g,l.matrix);i.alpha=v;i.SC=FB;if(j!=null){if(j.iB==null){g=i.matrix;}else if(identical(j.iB,h)){g=i.matrix;}else if(identical(j.iB,h.parent)){g=l.matrix;}else{g=j.iB.yC(h);if(g==null)g=oC;else g.fB(i.matrix);}j.RG(this,g);}if(k!=null){if(k.iB==null){g=i.matrix;}else if(identical(k.iB,h)){g=i.matrix;}else if(identical(k.iB,h.parent)){g=l.matrix;}else{g=k.iB.yC(h);if(g==null)g=oC;else g.fB(i.matrix);}k.SG(this,g);}var m=q;qH.setTransform(m.a,m.b,m.c,m.d,m.OB,m.PB);qH.globalCompositeOperation=FB;qH.globalAlpha=v;if(h.eF){h.UJ(this);}else{h.EB(this);}if(k!=null){k.WG();}if(j!=null){j.VG();}CI=l;}}class hD extends HC{hD():super(u.gD);}class yB{var matrix;var rB=double.INFINITY;var sB=double.NEGATIVE_INFINITY;var tB=double.INFINITY;var qB=double.NEGATIVE_INFINITY;var OC=double.INFINITY;var PC=double.NEGATIVE_INFINITY;var QC=double.INFINITY;var NC=double.NEGATIVE_INFINITY;var UC=double.NAN;var VC=double.NAN;yB(this.matrix); get uD=>!UC.isNaN&&!VC.isNaN; get mF=>!rB.isInfinite&&!sB.isInfinite&&!tB.isInfinite&&!qB.isInfinite; get lF=>!OC.isInfinite&&!PC.isInfinite&&!QC.isInfinite&&!NC.isInfinite;zF(){UC=VC=double.NAN;rB=tB=double.INFINITY;sB=qB=double.NEGATIVE_INFINITY;}zC( g, h){UC=g;VC=h;}DE( g, h,[ k=false]){if(uD){g=g.toDouble();h=h.toDouble();var i=k?g:g*matrix.a+h*matrix.c+matrix.OB;var j=k?h:g*matrix.b+h*matrix.d+matrix.PB;if(rB>i)rB=i;if(sB<i)sB=i;if(tB>j)tB=j;if(qB<j)qB=j;}}fill(){if(mF){if(OC>rB)OC=rB;if(PC<sB)PC=sB;if(QC>tB)QC=tB;if(NC<qB)NC=qB;}} kF(){if(lF){var g=OC.floor();var i=PC.ceil();var h=QC.floor();var j=NC.ceil();return new CB(g,h,i-g,j-h);}else{return new CB.bG();}}}class zB{static const  gC="auto";static const  CF="stop";static const  lD="once";}final  kD=new nC<oB>();final  mD=new nC<cD>();class nD{var target=null;var ZB=false;var sC=0;var AC=0;var zD,AE;var xD,yD;nD(this.zD,this.AE,this.xD,this.yD);}final  oD=new nC<hD>();class nC<xB extends HC>{final  uG=[] ;rC( g){uG.add(g);}dispatchEvent( g){var j=uG;var k=uG.length;for(int h=0;h<k;h++ ){var i=j[h];if(i.FI){g.BH=i.BH;g.jI=i.BH;g.hI=dB.JC;g.kI=false;g.oI=false;i.dispatchEvent(g);}else{j.removeAt(h);k-- ;h-- ;}}}}class IF{static var JF=0;var aC=JF++ ;var target=null;var XC=false;IF(this.target,this.XC);}class eB extends UB{static var KF=WF;var vI;var qH;var wI,yI;var zI;var AJ,CJ;var DJ;var EJ;var FJ;var GJ;var kG;var HJ;var IJ;var JJ;var KJ;var LJ;var MJ;var NJ;var OJ;var PJ;var QJ;var RJ;var SJ;eB( k, g,[ h, i, j]){if(g is !MB.CanvasElement){throw new ArgumentError("The canvas argument is not a CanvasElement");}if(g.tabIndex==-1)g.tabIndex=0;if(g.style.outline=="")g.style.outline="none";LI=k;vI=g;qH=g.context2D;wI=(h!=null)?h:g.width;yI=(i!=null)?i:g.height;zI=(j!=null)?j:30;AJ=-1;CJ=-1;DJ=new CB.bG();EJ=new t.cG();FJ=new t.cG();TJ();GJ=null;kG=new KC();IJ=new XB.dG(qH);JJ=zB.gC;KJ=vB.UD;LJ=JB.mC;PJ=[new nD(s.QD,s.VD,s.JD,s.YE),new nD(s.vE,s.zE,s.iD,s.iD),new nD(s.DF,s.EF,s.jD,s.jD)];MJ=IB.hC;OJ=null;NJ=new BB(0,0);RJ=new s(s.JD,true);cB.rE.listen(rE);vI.onMouseDown.listen(VJ);vI.onMouseUp.listen(VJ);vI.onMouseMove.listen(VJ);vI.onMouseOut.listen(VJ);vI.onMouseWheel.listen(WJ);QJ=new Map<int,IF>();SJ=new DB(DB.LD,true);SD.BF.listen(XJ);XJ(null);vI.onKeyDown.listen(YJ);vI.onKeyUp.listen(YJ);vI.onKeyPress.listen(YJ);} get vC=>GJ; get wD=>kG; get WC=>NJ; get focus=>HJ;ZJ(){throw new UnsupportedError("Error #2071: The Stage class does not implement this property or method.");}set x( g){ZJ();}set y( g){ZJ();}set wC( g){ZJ();}set xC( g){ZJ();}set alpha( g){ZJ();}set width( g){ZJ();}set height( g){ZJ();}nF( g, h){if(JJ==zB.gC||JJ==zB.lD){TJ();IJ.reset(FJ,g,h);EB(IJ);if(JJ==zB.lD)JJ=zB.CF;}}TJ(){var uB=vI.getBoundingClientRect();var FC=vI.clientLeft+uB.left;var GC=vI.clientTop+uB.top;var g=vI.clientWidth;var h=vI.clientHeight;var q=wI;var v=yI;if(g is !num)throw "dart2js_hint";if(h is !num)throw "dart2js_hint";if(q is !num)throw "dart2js_hint";if(v is !num)throw "dart2js_hint";if(g==0||h==0)return;var i=1.0;var j=1.0;var k=0.0;var l=0.0;var m=g/q;var n=h/v;switch (KJ){case vB.QE:i=m;j=n;break;case vB.VE:i=j=(m>n)?m:n;break;case vB.dE:i=j=1.0;break;case vB.UD:i=j=(m<n)?m:n;break;}switch (LJ){case JB.xE:case JB.fD:case JB.dD:k=(g-q*i);break;case JB.tE:case JB.mC:case JB.aD:k=(g-q*i)/2;break;}switch (LJ){case JB.nE:case JB.aD:case JB.dD:l=(h-v*j);break;case JB.SE:case JB.mC:case JB.fD:l=(h-v*j)/2;break;}var FB=DJ;FB.x=-k/i;FB.y=-l/j;FB.width=g/i;FB.height=h/j;var QB=(eB.KF?qD:1.0)/SF;FJ.ZC(i,0.0,0.0,j,k,l);FJ.scale(QB,QB);EJ.ZC(1.0,0.0,0.0,1.0,-FC-k,-GC-l);EJ.scale(1.0/i,1.0/j);if(AJ!=g||CJ!=h){AJ=g;CJ=h;vI.width=(AJ*QB).round();vI.height=(CJ*QB).round();if(vI.clientWidth!=g||vI.clientHeight!=h){vI.style.width="${g}px";vI.style.height="${h}px";}dispatchEvent(new u(u.sE));}}rE( g){vI.style.cursor=cB.pD(MJ);}VJ( j){j.preventDefault();var n=new DateTime.now().millisecondsSinceEpoch;var q=j.button;var g=null;var i=EJ.xI(j.client);var m=null;if(q<0||q>2)return;if(j.type=="mousemove"&&NJ.tD(i))return;var h=PJ[q];NJ=i;if(cB.PD!=null){cB.PD.iI();}if(j.type!="mouseout"){g=KB(i.x,i.y) as AB;}var k=IB.hC;if(g is wB&&(g as wB).EE){k=IB.jC;}if(g is CD&&(g as CD).EE){k=IB.jC;}if(g is ED&&(g as ED).type==GE.UE){k=IB.WD;}if(MJ!=k){MJ=k;vI.style.cursor=cB.pD(k);}if(OJ!=null&&OJ!=g){OJ.dispatchEvent(RJ..eI(s.bD,true)..sI=(OJ.hB!=null)?OJ.aB(i):new BB.bG()..tI=i..pI=h.ZB);OJ=null;}if(g!=null&&g!=OJ){g.dispatchEvent(RJ..eI(s.qE,true)..sI=g.aB(i)..tI=i..pI=h.ZB);OJ=g;}var l=null;var v=false;var FB=false;if(j.type=="mousedown"){vI.focus();l=h.zD;if(g!=h.target||n>h.sC+500)h.AC=0;h.ZB=true;h.target=g;h.sC=n;h.AC++ ;}if(j.type=="mouseup"){l=h.AE;h.ZB=false;v=(h.target==g);FB=v&&h.AC.isEven&&(n<h.sC+500);}if(j.type=="mousemove"){l=s.ZD;}if(l!=null&&g!=null){m=g.aB(i);g.dispatchEvent(RJ..eI(l,true)..sI=m..tI=i..pI=h.ZB..qI=h.AC);if(v){if(FB&&g.hF){g.dispatchEvent(RJ..eI(h.yD,true)..sI=m..tI=i..pI=h.ZB);}else{g.dispatchEvent(RJ..eI(h.xD,true)..sI=m..tI=i..pI=h.ZB);}}}}WJ( g){var h=EJ.xI(g.client);var i=KB(h.x,h.y) as AB;if(i!=null){i.dispatchEvent(RJ..eI(s.eD,true)..sI=i.aB(h)..tI=h..lI=g.deltaX..nI=g.deltaY);if(RJ.DC)g.preventDefault();}}var gJ=[] ;XJ( h){gJ.forEach((g)=>g.cancel());if(SD.HF==DD.bE){gJ=[vI.onTouchStart.listen(hJ),vI.onTouchEnd.listen(hJ),vI.onTouchMove.listen(hJ),vI.onTouchEnter.listen(hJ),vI.onTouchLeave.listen(hJ),vI.onTouchCancel.listen(hJ)];}}hJ( j){j.preventDefault();for(var m in j.changedTouches){var l=m.identifier;var i=EJ.xI(m.client);var h=KB(i.x,i.y) as AB;var g=QJ.containsKey(l)?QJ[l]:new IF(h,QJ.length==0);if(g.target!=null&&g.target!=h){g.target.dispatchEvent(SJ..eI(DB.pE,true)..sI=(g.target.hB!=null)?g.target.aB(i):new BB.bG()..tI=i..RI=g.aC..VI=g.XC);g.target=null;}if(h!=null&&h!=g.target){h.dispatchEvent(SJ..eI(DB.jE,true)..sI=h.aB(i)..tI=i..RI=g.aC..VI=g.XC);g.target=h;}var k=null;if(j.type=="touchstart"){vI.focus();QJ[l]=g;k=DB.LD;}if(j.type=="touchend"){QJ.remove(l);k=DB.OD;}if(j.type=="touchcancel"){QJ.remove(l);k=DB.RD;}if(j.type=="touchmove"){k=DB.XD;}if(k!=null&&h!=null){h.dispatchEvent(SJ..eI(k,true)..sI=h.aB(i)..tI=i..RI=g.aC..VI=g.XC);}}}YJ( g){if(g.keyCode==8){g.preventDefault();}if(HJ==null){return;}if(g.type=="keypress"){var i=g.charCode;var l=g.keyCode;if(l==13)i=13;if(i==0)return;var m=new KE(KE.WE,true)..aH=new String.fromCharCodes([i]);HJ.dispatchEvent(m);}else{var h=jB.PE;var j="";if(g.type=="keyup")j=VB.ND;if(g.type=="keydown")j=VB.MD;if(g.keyLocation==MB.KeyLocation.LEFT)h=jB.SE;if(g.keyLocation==MB.KeyLocation.RIGHT)h=jB.fD;if(g.keyLocation==MB.KeyLocation.NUMPAD)h=jB.cE;if(g.keyLocation==MB.KeyLocation.JOYSTICK)h=jB.TD;if(g.keyLocation==MB.KeyLocation.MOBILE)h=jB.TD;var k=new VB(j,true)..bH=g.altKey..gH=g.ctrlKey..iH=g.shiftKey..rH=g.charCode..uH=g.keyCode..xH=h;HJ.dispatchEvent(k);if(k.DC){g.preventDefault();}}}}class NG extends kB{NG();EB( g){g.beginPath();}EC( g){g.zF();}}class OG extends kB{var iG,lG;OG( g, h){iG=g.toDouble();lG=h.toDouble();}EB( g){g.moveTo(iG,lG);}EC( g){g.zC(iG,lG);}}final  LC=new ME<List<o>>(()=>new List<o>());final  oC=new t.cG();final  QF=new MB.CanvasElement(width:16,height:16);final  pC=QF.context2D;final  SF=pC.backingStorePixelRatio==null?1.0:pC.backingStorePixelRatio.toDouble();final  qD=MB.window.devicePixelRatio==null?1.0:MB.window.devicePixelRatio;final  UF=((){var g=MB.window.navigator.userAgent.toLowerCase();return g.indexOf("iphone")>=0||g.indexOf("ipad")>=0||g.indexOf("ipod")>=0||g.indexOf("android")>=0||g.indexOf("webos")>=0||g.indexOf("windows phone")>=0;})();final  VF=MB.window.screen==null?1024:cC.max(MB.window.screen.width,MB.window.screen.height);final  WF=qD>1.0&&(!UF||VF>480);class PG extends kB{var iG,lG,cJ;var dJ,eJ;var fJ;PG( g, h, i, j, k, l){iG=g.toDouble();lG=h.toDouble();cJ=i.toDouble();dJ=j.toDouble();eJ=k.toDouble();fJ=l;}EB( g){g.arc(iG,lG,cJ,dJ,eJ,fJ);}EC( g){var j=new LB(cJ,0);var l=j.rotate(dJ);var m=j.rotate(eJ);if(g.uD==false){g.zC(iG+l.x,lG+l.y);}var h=dJ;var i=eJ;if(fJ){if(h<i)h=h+2*cC.PI;}else{if(i<h)i=i+2*cC.PI;}var n=i-h;var q=(n*30).abs()~/cC.PI+1;g.DE(g.UC,g.VC);for(var k=0;k<=q;k++ ){var v=j.rotate(h+k*n/q);g.DE(iG+v.x,lG+v.y);}g.zC(iG+m.x,lG+m.y);}}abstract class XF extends kB{ KB( g, h, i){return g.isPointInPath(h,i);}EC( g){g.fill();}}class QG extends XF{var iJ;QG( g){iJ=g;}EB( g){g.fillStyle=iJ;g.fill();}}